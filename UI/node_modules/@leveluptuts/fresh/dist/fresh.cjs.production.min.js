"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=e(t),n=e(require("zustand")),l=e(require("immer")),a=e(require("prop-types")),i=e(require("react-tagsinput")),o=e(require("markdown-to-jsx"));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=n(function(e){return function(e,t){return function(e){return{data:{},isReady:{},defaultValues:{},setForm:function(t,r){return e((function(e){e.data[r]=u({},t)}))},setField:function(t,r,n){return e((function(e){e.data[n][t]=r}))},setDefaults:function(t,r){return e((function(e){e.defaultValues[r]=u({},t)}))},register:function(t,r){return e((function(e){e.data[r]=u({},t),e.defaultValues[r]=u({},t),e.isReady[r]=!0}))},unregister:function(t){return e((function(e){e.isReady[t]=!1}))},registerField:function(t,r,n){return e((function(e){e.data[n][t]=r}))},resetForm:function(t){return e((function(e){e.data[t]=e.defaultValues[t]}))}}}((function(t){return e(l(t))}))}}()),s=r.createContext(null),c=function(e){var t=e.cancelAction,n=e.cancelText,l=void 0===n?"Cancel":n,a=e.formId,i=d().resetForm;return r.createElement("button",{id:"fresh-cancel",className:"fresh-button fresh-cancel",onClick:function(){t(a),i(a)},type:"reset"},l)},f=function(e){var t=e.tooltipIconColor;return r.createElement("span",{className:"fresh-tooltip","data-tooltip":e.tooltip,style:{"--fresh-tooltip-background":e.tooltipBackground,"--fresh-tooltip-color":e.tooltipColor,"--fresh-tooltip-icon-color":t}},r.createElement("svg",{className:"fresh-tooltip-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM9.02539 5.91797H5.84668V7.79102H6.91309V11.127H5.84668V13H10.0098V11.127H9.02539V5.91797ZM6.89258 3.16309C6.83333 3.30892 6.80371 3.46615 6.80371 3.63477C6.80371 3.80339 6.83333 3.96289 6.89258 4.11328C6.95638 4.25911 7.04297 4.38672 7.15234 4.49609C7.26172 4.60547 7.38932 4.69206 7.53516 4.75586C7.68555 4.81966 7.84733 4.85156 8.02051 4.85156C8.18457 4.85156 8.33952 4.81966 8.48535 4.75586C8.63118 4.69206 8.75879 4.60547 8.86816 4.49609C8.97754 4.38672 9.06413 4.25911 9.12793 4.11328C9.19173 3.96289 9.22363 3.80339 9.22363 3.63477C9.22363 3.46615 9.19173 3.30892 9.12793 3.16309C9.06413 3.0127 8.97754 2.88281 8.86816 2.77344C8.75879 2.66406 8.63118 2.57747 8.48535 2.51367C8.33952 2.44987 8.18457 2.41797 8.02051 2.41797C7.84733 2.41797 7.68555 2.44987 7.53516 2.51367C7.38932 2.57747 7.26172 2.66406 7.15234 2.77344C7.04297 2.88281 6.95638 3.0127 6.89258 3.16309Z",fill:t})))};f.propTypes={tooltip:a.string,tooltipBackground:a.string,tooltipColor:a.string,tooltipIconColor:a.string},f.defaultProps={tooltip:"",tooltipBackground:"#eee",tooltipColor:"#000",tooltipIconColor:"#000"};var v=function(e){var n=e.options,l=e.fieldId,a=e.formId,i=e.displayProperty,o=void 0===i?"":i,u=e.valueProperty,s=void 0===u?"":u,c=e.className,f=void 0===c?"":c,v=d(),m=v.data,p=v.setField,h=v.registerField,g=v.defaultValues;return t.useEffect((function(){var e,t,r,i,o=(null==g?void 0:null===(e=g[a])||void 0===e?void 0:e[l])?(null==g?void 0:null===(t=g[a])||void 0===t?void 0:null===(r=t[l])||void 0===r?void 0:r[s])||(null==g?void 0:null===(i=g[a])||void 0===i?void 0:i[l]):n[0];h(l,o,a)}),[]),l in m[a]?r.createElement("select",{id:"fresh-"+l+"-"+a,className:"fresh-input fresh-input-select "+f,onChange:function(e){return p(l,e.target.value,a)},value:m[a][l]},n.map((function(e,t){return r.createElement("option",{value:(null==e?void 0:e[s])||e,key:"fresh-"+l+"-"+a+"-"+t,className:"fresh-option"},(null==e?void 0:e[o])||e)}))):null},m=function(e){var n,l,a=e.options,i=e.fieldId,o=e.keyProperty,u=void 0===o?"id":o,s=e.displayProperty,c=e.placeholder,f=void 0===c?"":c,v=e.className,m=void 0===v?"":v,p=e.formId,h=d(),g=h.data,E=h.setField,y=h.isReady,C=h.defaultValues,b=h.registerField,I=t.useState((null==C?void 0:null===(n=C[p])||void 0===n?void 0:null===(l=n[i])||void 0===l?void 0:l[s])||""),N=I[0],w=I[1],F=t.useState(!1),x=F[0],V=F[1];return t.useEffect((function(){var e,t,r=null!==(e=null==C?void 0:null===(t=C[p])||void 0===t?void 0:t[i])&&void 0!==e?e:"";b(i,r,p)}),[]),i in g[p]&&y?r.createElement(r.Fragment,null,r.createElement("input",{id:"fresh-"+i+"-"+p,onChange:function(e){return w(e.target.value)},value:N,onFocus:function(){return V(!0)},onBlur:function(){return V(!1)},placeholder:f,type:"text",className:"fresh-input fresh-input-reference "+m}),x&&r.createElement("div",{className:"fresh-focused"},a.filter((function(e){return e[s].toLowerCase().includes(N.toLowerCase())})).map((function(e){return r.createElement("div",{key:e[u],style:{padding:"0.75em"},onMouseDown:function(){E(i,e,p),w(e[s])}},e[s])})))):null},p=function(e){var n,l=e.placeholder,a=e.className,i=void 0===a?"":a,o=e.required,s=e.fieldId,c=e.strength,f=void 0===c||c,v=e.type,m=e.formId,p=d(),g=p.data,E=p.setField,y=p.defaultValues,C=p.registerField;if(t.useEffect((function(){var e,t,r=null!==(e=null==y?void 0:null===(t=y[m])||void 0===t?void 0:t[s])&&void 0!==e?e:"";C(s,r,m)}),[]),!(s in g[m]))return null;var b=function(e){var t=0;if(e.length<h.minimumLength)return-1;t+=4*e.length,e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(t+=5);var r=".*[!,@,#,$,%,^,&,*,?,_,~]";return r=new RegExp("("+r+r+")"),e.match(r)&&(t+=5),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(t+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(t+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([0-9])/)&&(t+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([a-zA-Z])/)&&(t+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(t-=10),t>100&&(t=100),t<0&&(t=0),.04*t}(null!==(n=g[m][s])&&void 0!==n?n:""),I={background:"#ccc",width:"calc(193px * 0.25)"};return b>=2&&b<3?I={width:"calc(193px * 0.5)",background:"red"}:b>=3&&b<4?I={width:"calc(193px * 0.75)",background:"red"}:b>=4&&(I={width:"calc(193px * 1)",background:"green"}),r.createElement(r.Fragment,null,r.createElement("input",{className:"fresh-input fresh-input-password "+i,placeholder:l,type:v,required:o,id:"fresh-"+s+"-"+m,value:g[m][s],onChange:function(e){return E(s,e.target.value,m)}}),f&&r.createElement("div",{style:u({height:"4px",marginBottom:"1rem",transition:"0.3s ease all"},I)}))},h={showText:!0,fieldPartialMatch:!0,minimumLength:4},g=function(e){var n=e.fieldId,l=e.className,a=void 0===l?"":l,o=e.formId,u=d(),s=u.data,c=u.setField,f=u.defaultValues,v=u.registerField;return t.useEffect((function(){var e,t,r=null!==(e=null==f?void 0:null===(t=f[o])||void 0===t?void 0:t[n])&&void 0!==e?e:[];v(n,r,o)}),[]),n in s[o]?r.createElement(i,{value:s[o][n]||[],onChange:function(e){return c(n,e,o)},className:"fresh-input-tags "+a,id:"fresh-"+n+"-"+o,style:{marginTop:"1rem"}}):null},E=function(e){var n=e.className,l=e.fieldId,a=e.formId,i=e.placeholder,o=d(),u=o.data,s=o.setField,c=o.registerField,f=o.defaultValues;return t.useEffect((function(){var e,t,r=null!==(e=null==f?void 0:null===(t=f[a])||void 0===t?void 0:t[l])&&void 0!==e?e:"";c(l,r,a)}),[]),l in u[a]?r.createElement("textarea",{id:"fresh-"+l+"-"+a,placeholder:i,value:u[a][l],className:"fresh-input fresh-input-textarea "+n,onChange:function(e){return s(l,e.target.value,a)}}):null},y=function(e){var n=e.fieldId,l=e.placeholder,a=e.required,i=e.formId,o=e.className,u=d(),s=u.data,c=u.setField,f=u.defaultValues,v=u.registerField;return t.useEffect((function(){var e,t,r=null!==(e=null==f?void 0:null===(t=f[i])||void 0===t?void 0:t[n])&&void 0!==e?e:"";v(n,r,i)}),[]),n in s[i]?r.createElement("input",{required:a,className:"fresh-input fresh-input-number "+o,placeholder:l,id:"fresh-"+n+"-"+i,type:"number",value:s[i][n],onChange:function(e){var t=e.target.value?parseInt(e.target.value):null;c(n,t,i)}}):null},C=function(e){var n=e.fieldId,l=e.placeholder,a=e.formId,i=d(),u=i.data,s=i.setField,c=i.defaultValues,f=i.registerField;return t.useEffect((function(){var e,t,r=null!==(e=null==c?void 0:null===(t=c[a])||void 0===t?void 0:t[n])&&void 0!==e?e:"";f(n,r,a)}),[]),n in u[a]?r.createElement("div",{className:"fresh-markdown-wrapper"},r.createElement("textarea",{id:"fresh-"+n,placeholder:l,value:u[a][n],className:"fresh-input fresh-input-textarea",onChange:function(e){return s(n,e.target.value,a)}}),r.createElement("div",{className:"fresh-input fresh-input-markdown"},r.createElement(o,{children:u[a][n]||""}))):null},b=function(e){var n=e.className,l=e.fieldId,a=e.placeholder,i=e.required,o=e.type,u=e.formId,s=d(),c=s.data,f=s.setField,v=s.registerField,m=s.defaultValues;return t.useEffect((function(){var e,t,r=null!==(e=null==m?void 0:null===(t=m[u])||void 0===t?void 0:t[l])&&void 0!==e?e:"";v(l,r,u)}),[]),l in c[u]?r.createElement("input",{required:i,className:"fresh-input fresh-input-"+o+" "+n,placeholder:a,id:"fresh-"+l+"-"+u,type:o,value:c[u][l],onChange:function(e){return f(l,e.target.value,u)}}):null},I=function(e){var n=e.fieldId,l=e.className,a=void 0===l?"":l,i=e.formId,o=d(),u=o.data,s=o.setField,c=o.defaultValues,f=o.registerField;return t.useEffect((function(){var e,t,r=null!==(e=null==c?void 0:null===(t=c[i])||void 0===t?void 0:t[n])&&void 0!==e&&e;f(n,r,i)}),[]),n in u[i]?r.createElement("div",{className:a+" fresh-switch"},r.createElement("input",{checked:u[i][n]||!1,type:"checkbox",id:"fresh-"+n,className:"fresh-input-toggle",onChange:function(e){return s(n,!u[i][n],i)}}),r.createElement("span",{className:"fresh-slider "+(u[i][n]?"on":""),onChange:function(e){return s(n,!u[i][n],i)}})):null},N=function(e){var n=e.required,l=void 0!==n&&n,a=e.children,i=e.name,o=void 0===i?"":i,u=e.type,d=void 0===u?"text":u,c=e.label,h=void 0===c||c,N=e.error,w=e.placeholder,F=void 0===w?"":w,x=e.options,V=e.strength,k=e.className,P=void 0===k?"":k,O=e.defaultValue,j=void 0===O?"":O,q=e.displayProperty,A=void 0===q?"":q,R=e.valueProperty,Z=void 0===R?"":R,B=e.keyProperty,T=void 0===B?"id":B,M=e.tooltip,S=e.readOnly,z=void 0!==S&&S,H=e.wrapperStyle,L=void 0===H?{}:H,$=o||a.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(function(e,t){return 0==+e?"":0==t?e.toLowerCase():e.toUpperCase()})),_=t.useContext(s),D={children:a,required:l,name:o,type:d,label:h,error:N,placeholder:F,options:x,className:P,defaultValue:j,displayProperty:A,readOnly:z,formId:_.formId};return r.createElement("div",{className:"fresh-field-wrapper "+$,style:L},r.createElement("label",{className:"fresh-label",htmlFor:"fresh-"+$},r.createElement("span",{className:"fresh-title"},l&&"*"," ",h&&a,"Â ",M&&r.createElement(f,{tooltip:M})),function(){switch(d){case"select":return r.createElement(v,Object.assign({fieldId:$,valueProperty:Z},D));case"reference":return r.createElement(m,Object.assign({fieldId:$,keyProperty:T},D));case"password":return r.createElement(p,Object.assign({strength:V,fieldId:$},D));case"tags":return r.createElement(g,Object.assign({fieldId:$},D));case"textarea":return r.createElement(E,Object.assign({fieldId:$},D));case"number":return r.createElement(y,Object.assign({fieldId:$},D));case"markdown":return r.createElement(C,Object.assign({fieldId:$},D));case"toggle":return r.createElement(I,Object.assign({fieldId:$},D));default:return r.createElement(b,Object.assign({fieldId:$},D))}}()),N&&r.createElement("div",{className:"fresh-error"},N))};N.defaultProps={defaultValue:null,options:[],tooltip:""},exports.Field=N,exports.Form=function(e){var n=e.cancelAction,l=void 0===n?function(){return null}:n,a=e.onChange,i=void 0===a?null:a,o=e.cancelButton,u=void 0===o||o,f=e.cancelText,v=void 0===f?"Cancel":f,m=e.children,p=e.formId,h=e.onSubmit,g=e.submitText,E=void 0===g?"Submit":g,y=e.className,C=void 0===y?"":y,b=e.defaultValues,I=void 0===b?{}:b,N=d(),w=N.data,F=N.register,x=N.isReady,V=N.unregister;return t.useEffect((function(){return F(I,p),function(){V(p)}}),[]),x[p]?r.createElement(s.Provider,{value:{formId:p}},r.createElement("form",{className:C+" fresh-form",onSubmit:function(e){e.preventDefault(),h(w[p])},onChange:function(){i&&i(w[p])}},m,r.createElement("div",null,r.createElement("button",{id:"fresh-submit",className:"fresh-button fresh-submit",type:"submit"},E),u&&r.createElement(c,{formId:p,cancelAction:l,cancelText:v})))):null},exports.useForm=d;
//# sourceMappingURL=fresh.cjs.production.min.js.map
