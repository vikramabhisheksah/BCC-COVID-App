(this["webpackJsonpreact-ui"]=this["webpackJsonpreact-ui"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"SERVER_URL":"https://oneazrap2906.one.ofc.loc"}')},125:function(e,t,a){},126:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},267:function(e,t,a){"use strict";a.r(t);var s=a(1),l=a(0),n=a.n(l),i=a(20),o=a.n(i),r=(a(125),a(28)),c=a(21),d=a(22),u=a(24),h=a(23),p=a(116),b=a(16),f=(a(126),a(14)),j=(a(41),a(6)),m=(a(74),a(9)),g=a.n(m),O=(a(145),a(146),a(10)),v=a(49),_=a.n(v),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).onChangeHandler=function(e){var t=e.target.files;s.validateSize(e)&&s.setState({selectedFile:t})},s.fileDownloaddHandler=function(){var e=s.state;console.log(e),g.a.request({url:O.SERVER_URL+"/api/upload/res",method:"Post",data:e,responseType:"arraybuffer"}).then((function(e){console.log(e);var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","download.xlsx"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)})),s.setState({resFileName:"",showDownloadButton:"fresh-button hide_data",showUploadButton:"fresh-button"})},s.fileUploadHandler=function(){var e=new FormData;if(null===s.state.selectedFile){j.b.error("No Files selected")}else{for(var t=0;t<s.state.selectedFile.length;t++)e.append("file",s.state.selectedFile[t]);g.a.post(O.SERVER_URL+"/api/upload",e,{headers:{email:s.state.email}}).then((function(e){console.log("Response Received"),j.b.info("File is uploaded & under processing"),s.setState({resFileName:e.data,showUploadButton:"fresh-button hide_data",loading:!0}),s.WaitForUpload(e.data)})).catch((function(e){console.error("There was an error in uploading data !",e),j.b.error("Error in uploading, please try again")}))}},s.validateSize=function(e){var t=e.target.files,a="";if(console.log("size"+t.size+"length"+t.length),0===t.length)a="No Files selected",j.b.error(a);else for(var s=0;s<t.length;s++)t[s].size>3e8&&(a=t[s].type+"is too large, please pick a smaller file\n",j.b.error(a));return""===a||(e.target.value=null,console.log(a),!1)},s.fileDownloaddHandler=s.fileDownloaddHandler.bind(Object(f.a)(s)),s.state={selectedFile:null,resFileName:"",showUploadButton:"fresh-button",showDownloadButton:"fresh-button hide_data",email:s.props.email,loading:!1,exitFlag:!1},s}return Object(d.a)(a,[{key:"WaitForUpload",value:function(e){var t=this,a={outfile:e};console.log("Outfile"+e),g.a.post(O.SERVER_URL+"/api/upload/status",a).then((function(a){console.log(a.data),"Completed"===a.data[0].Upload_Status?(j.b.success("File processed successfully! Please download the Response."),t.setState({loading:!1,showDownloadButton:"fresh-button"})):setTimeout((function(){console.log("tryng again"),t.WaitForUpload(e)}),5e3)})).catch((function(e){console.error("There was an error in fetching upload status data !",e),t.setState({loading:!1})}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"popup",children:Object(s.jsx)("div",{className:"popup_inner",children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-md-1"}),Object(s.jsx)("div",{className:"col-md-1"}),Object(s.jsx)("div",{className:"col-md-6",children:Object(s.jsxs)("form",{method:"post",action:"#",id:"#",children:[Object(s.jsxs)("div",{className:"form-group files",children:[Object(s.jsxs)("label",{children:[" ",Object(s.jsx)("h4",{children:"Upload Your File"})," "]}),Object(s.jsx)("input",{type:"file",name:"file",multiple:!0,className:"form-control",onChange:this.onChangeHandler})]}),Object(s.jsxs)("div",{className:"col-md-12 pull-right",children:[Object(s.jsx)("button",{width:"100%",type:"button",className:this.state.showUploadButton,onClick:this.fileUploadHandler,children:"Upload File"}),this.state.loading?Object(s.jsx)(_.a,{loading:this.state.loading}):Object(s.jsx)("button",{width:"100%",type:"button",className:this.state.showDownloadButton,onClick:this.fileDownloaddHandler,children:"Download Response"})]})]})}),Object(s.jsx)("div",{className:"col-md-1"}),Object(s.jsxs)("div",{className:"col-md-1",children:[" ",Object(s.jsx)("button",{width:"100%",type:"button",className:"btn btn-danger",onClick:this.props.closePopup,children:"X"})]})]}),Object(s.jsx)(j.a,{})]})})})}}]),a}(l.Component),y=a(25),w=a(55),S=a.n(w),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).downloadExcelFile=function(){console.log("download request send."),g()({url:O.SERVER_URL+"/exportTemp/",method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Download.xlsx"),document.body.appendChild(a),a.click(),j.b.success("Template downloaded successfully.")}))},s.onSubmit=function(e){console.log(e);var t={value:s.state.sales_order};g.a.post(O.SERVER_URL+"/api/filterData/findSo",t).then((function(e){console.log(e.data),console.log(e.data.length),console.log(s.state),e.data.length>0?g.a.post(O.SERVER_URL+"/api/filterData/GetDuplicate",s.state).then((function(e){if(console.log(e.data[0].Column0),0===e.data[0].Column0)if("date"===s.state.newValueFieldType&&s.setState({new_value:S()(s.state.new_value).format("DD-MM-YYYY")}),console.log(s.state),""!==s.state.new_value||1===s.state.request_type){var t={value:s.state.sales_order};console.log("sales order no."+t),g.a.post(O.SERVER_URL+"/api/filterData/fetchZCDP",t).then((function(e){console.log(e.data[0]),g.a.post(O.SERVER_URL+"/api/filterData/updateZCDP",e.data[0]).then((function(e){console.log(e),g.a.post(O.SERVER_URL+"/api/filterData/fetchZXXVL",t).then((function(e){console.log(e.data[0]),g.a.post(O.SERVER_URL+"/api/filterData/updateZXXVL",e.data[0]).then((function(e){console.log(e),g.a.post(O.SERVER_URL+"/api/add/new",s.state).then((function(e){console.log(e),j.b.success("Request raised successfully."),setTimeout((function(){return window.location.reload()}),1e3)})).catch((function(e){console.log(e),j.b.error("Error in upload.")}))})).catch((function(e){console.log(e),j.b.error("Error in inserting zxxvl")}))})).catch((function(e){console.log(e),j.b.error("Error in fetching zxxvl")}))})).catch((function(e){console.log(e),j.b.error("Error in inserting zcdp")}))})).catch((function(e){console.log(e),j.b.error("Error in fetching zcdp")}))}else j.b.error("Request not allowed.");else console.log(e.data[0]),j.b.warning("There is already a request in server with same details.")})).catch((function(e){console.log(e),j.b.error("Error in upload.")})):j.b.error("No Data found for the Sales Order. Unable to submit request.")}))},s.onCancle=function(){window.location.reload(!0)},s.onChangeZone=s.onChangeZone.bind(Object(f.a)(s)),s.onChangeRequestType=s.onChangeRequestType.bind(Object(f.a)(s)),s.onChangeRequestFlow=s.onChangeRequestFlow.bind(Object(f.a)(s)),s.onChangeRequesterType=s.onChangeRequesterType.bind(Object(f.a)(s)),s.onChangeNewShippingPoint=s.onChangeNewShippingPoint.bind(Object(f.a)(s)),s.onChangeOldValue=s.onChangeOldValue.bind(Object(f.a)(s)),s.onChangeNewValue=s.onChangeNewValue.bind(Object(f.a)(s)),s.onchangeSalesOrder=s.onchangeSalesOrder.bind(Object(f.a)(s)),s.onChangeRequestReason=s.onChangeRequestReason.bind(Object(f.a)(s)),s.onChangeQuotation=s.onChangeQuotation.bind(Object(f.a)(s)),s.onChangePlant_Mapping=s.onChangePlant_Mapping.bind(Object(f.a)(s)),s.onChangeShipping_point_In_NewValue=s.onChangeShipping_point_In_NewValue.bind(Object(f.a)(s)),s.onchangeAdditionalInformation=s.onchangeAdditionalInformation.bind(Object(f.a)(s)),s.onchangeAdditionalNotificationTo=s.onchangeAdditionalNotificationTo.bind(Object(f.a)(s)),s.state={showPopup:!1,showNewShippingPoint:"fresh-field-wrapper hide_data",showValue:"fresh-field-wrapper hide_data",newValueFieldType:"text",newValueReadOnly:!1,request_zone:"",request_type:"",request_flow:"3",requester_type:"",new_shipping_point:"",old_value:"",new_value:"",requester_email:s.props.email,sales_order:"",quotation:"",request_reason:"",plant_mapping:"",salse_org:"",shipping_point_mapping:"",additional_Information:"",additional_notification_to:""},s}return Object(d.a)(a,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"componentDidUpdate",value:function(){console.log("this called"),console.log(this.state)}},{key:"onChangeZone",value:function(e){console.log(e.value),this.setState({request_zone:e.value,sales_order:""}),1===e.value&&5===this.state.request_type?this.setState({showNewShippingPoint:"fresh-field-wrapper"}):this.setState({showNewShippingPoint:"fresh-field-wrapper hide_data"})}},{key:"onChangeRequestType",value:function(e){console.log(e.value),this.setState({request_type:e.value,old_value:"",sales_order:""}),console.log("line no 77"),5===e.value&&1===this.state.request_zone?this.setState({showNewShippingPoint:"fresh-field-wrapper"}):this.setState({showNewShippingPoint:"fresh-field-wrapper hide_data"}),1===e.value?this.setState({showValue:"fresh-field-wrapper hide_data"}):this.setState({showValue:"fresh-field-wrapper"}),console.log(e.value),3===e.value?this.setState({newValueFieldType:"date",new_value:""}):this.setState({newValueFieldType:"text",new_value:""})}},{key:"onChangePlant_Mapping",value:function(e){var t=this;if(console.log(e.label),this.setState({new_value:e.label.substr(0,4),shipping_point_mapping:""}),1===this.state.request_zone){var a={plant_code:e.label.substr(0,4),request_zone:this.state.request_zone};console.log("getting shipping point :"+a),g.a.post(O.SERVER_URL+"/api/getShippingPoint",a).then((function(e){console.log(e),t.setState({shipping_point_mapping:e.data})}))}}},{key:"onChangeShipping_point_In_NewValue",value:function(e){console.log(e.label),this.setState({new_value:e.label})}},{key:"onChangeRequestFlow",value:function(e){console.log(e.value),this.setState({request_flow:e.value})}},{key:"onChangeRequesterType",value:function(e){console.log(e.value),this.setState({requester_type:e.value,sales_order:""})}},{key:"onChangeNewShippingPoint",value:function(e){console.log(e.label),this.setState({new_shipping_point:e.label})}},{key:"onChangeOldValue",value:function(e){console.log(e.target.value),this.setState({old_value:e.target.value})}},{key:"onChangeNewValue",value:function(e){console.log(e.target.value);var t=e.target.value;console.log("request type :"+this.state.request_type);var a=!1;if(2===this.state.request_type&&isNaN(e.target.value)&&""!==e.target.value)a=!0;else if(console.log(t),console.log(t.includes(".")),!0!==e.target.value.includes(".")){if(console.log(this.state.request_type),7===this.state.request_type){if(t.length>6)a=!0;else if(6===t.length&&("MX"!==t.substr(0,2).toUpperCase()||!isNaN(t.substr(2,1))||!isNaN(t.substr(3,1))||isNaN(t.substr(4,2))))return console.log("Done"),void this.setState({new_value:""})}else 4===this.state.request_type?t.length>20&&(a=!0):5===this.state.request_type?t.length>4&&(a=!0):6===this.state.request_type&&t.length>4&&(a=!0);console.log("flag="+a),!0!==a&&this.setState({new_value:e.target.value})}else a=!0}},{key:"onchangeSalesOrder",value:function(e){var t=this;if(console.log(e.target.value),(Number(e.target.value)||""===e.target.value)&&!0!==e.target.value.includes(".")&&!(e.target.value.length>8)){this.setState({sales_order:e.target.value}),console.log(this.state.sales_order);var a={value:e.target.value};e.target.value.length>=8?g.a.post(O.SERVER_URL+"/api/filterData/findSo",a).then((function(e){if(console.log(e.data),console.log(e.data.length),e.data.length>0)if(null===e.data[0].Quotation?t.setState({quotation:""}):t.setState({quotation:e.data[0].Quotation}),t.setState({salse_org:e.data[0].sales_org}),4===t.state.request_type)t.setState({old_value:e.data[0].Customer_Ref_PO});else if(3===t.state.request_type)t.setState({old_value:S()(e.data[0].Mad).format("DD-MM-YYYY")});else if(5===t.state.request_type){t.setState({old_value:e.data[0].Delivery_Plant_ID});var a={sales_org:e.data[0].sales_org,request_zone:t.state.request_zone};console.log("getting plant :"+a),g.a.post(O.SERVER_URL+"/api/getPlant",a).then((function(e){console.log(e),t.setState({plant_mapping:e.data,newValueFieldType:"plant"})}))}else if(6===t.state.request_type){t.setState({old_value:e.data[0].Shipping_Point});var s={plant_code:e.data[0].Delivery_Plant_ID,request_zone:t.state.request_zone};console.log("getting shipping point :"+s.data),g.a.post(O.SERVER_URL+"/api/getShippingPoint",s).then((function(e){console.log(e),t.setState({shipping_point_mapping:e.data,newValueFieldType:"shipping point"})}))}else 7===t.state.request_type?t.setState({old_value:e.data[0].Route}):2===t.state.request_type&&t.setState({old_value:e.data[0].quantity_orderd,newValueReadOnly:!1});else j.b.warning("No data found for the sales order.")})):this.setState({old_value:""})}}},{key:"onChangeQuotation",value:function(e){console.log(e.target.value),this.setState({quotation:e.target.value})}},{key:"onChangeRequestReason",value:function(e){console.log(e.value),this.setState({request_reason:e.value})}},{key:"onchangeAdditionalInformation",value:function(e){console.log(e.target.value),this.setState({additional_Information:e.target.value})}},{key:"onchangeAdditionalNotificationTo",value:function(e){console.log(e.value),this.setState({additional_notification_to:e.target.value})}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"page",children:[Object(s.jsxs)("div",{className:"Download_btn",children:[Object(s.jsx)("button",{type:"button",className:"fresh-button cust_btn-cls",onClick:this.downloadExcelFile,children:"Download Template"}),Object(s.jsx)("button",{type:"button",className:"fresh-button cust_btn-cls",onClick:this.togglePopup.bind(this),children:"Upload multiple request Document"})]}),Object(s.jsx)("div",{className:"UploaderNreview",children:this.state.showPopup?Object(s.jsx)(x,{id:"FileUpload",text:'Click "Close Button" to hide popup',closePopup:this.togglePopup.bind(this),email:this.state.requester_email}):null}),Object(s.jsxs)("div",{className:"fresh-form",children:[Object(s.jsx)("h4",{children:"Request Form"}),Object(s.jsx)("h5",{className:"reminder",children:"* Mandatory fields"}),Object(s.jsxs)("div",{className:"fresh-field-wrapper request_zone",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_zone",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "})," Zone\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Mexico",value:1},{label:"Europe",value:2},{label:"NAZ",value:3}],onChange:this.onChangeZone})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_type",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Request Type\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Cancellation",value:1},{label:"QTY change",value:2},{label:"MAD",value:3},{label:"PO Number",value:4},{label:"Plant",value:5},{label:"Shipping Point",value:6},{label:"Route",value:7}],onChange:this.onChangeRequestType})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-requester_type",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Requester Type\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Customer",value:1},{label:"Demand Planning / Central Planning",value:2},{label:"Transport Planning",value:3},{label:"Commercial",value:4},{label:"Order Taking",value:5},{label:"Inventory Deployment BE",value:6},{label:"Inventory Deployment DE",value:7},{label:"Inventory Deployment UK",value:8},{label:"Inventory Deployment Exports",value:9},{label:"US BSC",value:10}],onChange:this.onChangeRequesterType})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-sales_order",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Sales Order\xa0"]})}),Object(s.jsx)("input",{id:"fresh-sales_order-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onchangeSalesOrder,required:!0,type:"text",value:this.state.sales_order})]}),Object(s.jsxs)("div",{className:this.state.showValue,children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-old_value",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Old Value\xa0"]})}),Object(s.jsx)("input",{id:"fresh-old_value-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onChangeOldValue,value:this.state.old_value,readOnly:!0})]}),Object(s.jsxs)("div",{className:this.state.showValue,children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-new_value",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"New Value\xa0"]})}),"text"===this.state.newValueFieldType&&Object(s.jsx)("input",{id:"fresh-new_value-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onChangeNewValue,type:this.state.newValueFieldType,readOnly:this.state.newValueReadOnly,value:this.state.new_value}),"date"===this.state.newValueFieldType&&Object(s.jsx)("input",{id:"fresh-new_value-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onChangeNewValue,type:this.state.newValueFieldType,readOnly:this.state.newValueReadOnly,value:this.state.new_value,min:S()().format("YYYY-MM-DD")}),"plant"===this.state.newValueFieldType&&Object(s.jsx)(y.a,{options:this.state.plant_mapping,onChange:this.onChangePlant_Mapping}),"shipping point"===this.state.newValueFieldType&&Object(s.jsx)(y.a,{options:this.state.shipping_point_mapping,onChange:this.onChangeShipping_point_In_NewValue})]}),Object(s.jsxs)("div",{className:this.state.showNewShippingPoint,children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-new_shipping_point",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"New Shipping Point\xa0"]})}),Object(s.jsx)(y.a,{options:this.state.shipping_point_mapping,onChange:this.onChangeNewShippingPoint})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_reason",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Request Reason\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Customer request",value:1},{label:"Material issue",value:2},{label:"Production issue",value:3},{label:"Quality issue",value:4},{label:"Capacity issue in loading point",value:5},{label:"Validation",value:6},{label:"Processing Mistake",value:7}],onChange:this.onChangeRequestReason})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-additional information",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder"}),"Additional Information\xa0"]})}),Object(s.jsx)("input",{id:"fresh-additional information-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onchangeAdditionalInformation,type:"text",value:this.state.additional_Information})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-additional_notification_to",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder"}),"Additional Notification To\xa0"]})}),Object(s.jsx)("input",{id:"fresh-additional_notification_to-user-profile",className:"fresh-input css-yk16xz-control",onChange:this.onchangeAdditionalNotificationTo,type:"text",value:this.state.additional_notification_to})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("button",{className:"fresh-button cust_btn-cls",onClick:this.onSubmit,children:"Submit\xa0"}),Object(s.jsx)("button",{className:"fresh-button cust_btn-cls",onClick:this.onCancle,children:"Cancel"})]})]}),Object(s.jsx)(j.a,{autoClose:3e3})]})}}]),a}(l.Component),R=a(118),C=a(51),F=a.n(C),q=a(111),E=a.n(q),k=a(112),U=a.n(k),z=(a(95),a(96),a(52)),D=a.n(z),V=a(5),T=a.n(V),A=(a(238),a(94),a(113)),P=a.n(A),L=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).updateRequestStatus=function(){console.log(s.state.selected),""!==s.state.new_status?(console.log(s.state.approver),g.a.post(O.SERVER_URL+"/api/update",{selected:s.state.selected,new_status:s.state.new_status,rejection_reason:s.state.rejection_reason,approver:s.state.approver}).then((function(e){console.log(e),"Please select requests to process."===e.data?j.b.warning(e.data):j.b.success("Request status modified successfully."),s.pullData(),s.setState((function(){return{selected:[],new_status:""}})),setTimeout((function(){return window.location.reload()}),1e3)})).catch((function(e){console.log(e),j.b.error("Unknown Error in Modifying status"),setTimeout((function(){return window.location.reload()}),1e3)}))):j.b.error("Select the New Status from Dropdown")},s.handleUnSelect=function(e){var t=e.map((function(e){return"Completed"===e.request_status||"WIP"===e.request_status?e.Request_id:""}));console.log(t),s.setState((function(){return{nonSelected:t}}))},s.handleOnSelect=function(e,t){t?s.setState((function(){return{selected:[].concat(Object(R.a)(s.state.selected),[e.Request_id])}})):s.setState((function(){return{selected:s.state.selected.filter((function(t){return t!==e.Request_id}))}}))},s.handleOnSelectAll=function(e,t){var a=s.state.filesData.map((function(e){return e.Request_id}));e?s.setState((function(){return{selected:a}})):s.setState((function(){return{selected:[]}}))},s.addItemMultipleSO=function(e,t){console.log(t),g.a.post(O.SERVER_URL+"/api/filterMultipleSO",{SO:t},{headers:{userRole:s.state.userRole,requesterEmail:s.state.approver}}).then((function(e){s.setState({filesData:e.data}),s.handleUnSelect(e.data)}))},s.onChangeActionType=s.onChangeActionType.bind(Object(f.a)(s)),s.onchangeRejectionReason=s.onchangeRejectionReason.bind(Object(f.a)(s)),s.onClickSubmit=s.onClickSubmit.bind(Object(f.a)(s)),s.state={filesData:[],nonSelected:[],selected:[],isHidden:!0,new_status:"",show_rejection_reason:"fresh-field-wrapper hide_data",rejection_reason:"",approver:s.props.email,userRole:s.props.userRole,loading:!1},s}return Object(d.a)(a,[{key:"toggleHidden",value:function(){this.setState({isHidden:!this.state.isHidden})}},{key:"pullData",value:function(){var e=this;this.setState({loading:!0}),g.a.get(O.SERVER_URL+"/api/getall",{headers:{userRole:this.state.userRole,requesterEmail:this.state.approver}}).then((function(t){e.setState({filesData:t.data}),e.handleUnSelect(t.data)})).catch((function(e){console.error("There was an error in fetching data !",e)})).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidMount",value:function(){console.log(this.state.userRole),this.pullData()}},{key:"onChangeActionType",value:function(e){console.log("dropdown value"+e.value),this.setState({new_status:e.value}),3===e.value?(console.log("unhide"+this.state.new_status),this.setState({show_rejection_reason:"fresh-field-wrapper"})):this.setState({show_rejection_reason:"fresh-field-wrapper hide_data"})}},{key:"onchangeRejectionReason",value:function(e){console.log(e.target.value),this.setState({rejection_reason:e.target.value})}},{key:"onClickSubmit",value:function(){""===this.state.new_status||3===this.state.new_status&&""===this.state.rejection_reason?j.b.error("Please populate the mandatory fields"):this.updateRequestStatus()}},{key:"render",value:function(){var e=this,t=function(e){return Object(s.jsx)("div",{className:"div_export",children:Object(s.jsx)("button",{type:"button",className:"fresh-button",onClick:function(){e.onExport()},children:"Export to CSV"})})},a={mode:"checkbox",clickToSelect:!0,clickToEdit:!0,selected:this.state.selected,nonSelectable:this.state.nonSelected,onSelect:this.handleOnSelect,onSelectAll:this.handleOnSelectAll,bgColor:"rgb(240, 190, 185)"},l=[{dataField:"Request_id",text:"REQ ID",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"creation_date",text:"Creation Date",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),sort:!0,editable:!1,style:{"white-space":"nowrap"}},{dataField:"updateion_date",text:"Updation Date",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"date_order_registered",text:"Document Date",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"request_zone",text:"Zone",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"request_type",text:"Request Type",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"requestor_type",text:"Requestor Type",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"request_reason",text:"Request Reason",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"request_flow",text:"Request Flow",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"sales_order",text:"Sales Order",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"sales_org",text:"Sales Organization",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"ship_to_country",text:"Ship To Country",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"sku_no",text:"SKU No.",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"material_no",text:"Material",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"old_value",text:"Old Value",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"new_value",text:"New Value",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"new_shipping_point",text:"New Shipping Point",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"request_status",text:"Request Status",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"bot_status",text:"Bot Status",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"bot_comments",text:"Comments/Reason for Rejection",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"requester_email",text:"Requester Email",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1,style:{"white-space":"nowrap"}},{dataField:"additional_notification_to",text:"Additional Notification To",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),style:{"white-space":"nowrap"}},{dataField:"additional_information",text:"Additional Information",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"quotation_number",text:"Quotation",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"credit_block",text:"Credit Block",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"delivery_block",text:"Delivery Block",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}})},{dataField:"inco_terms",text:"Incoterms",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"sold_to_num",text:"Sold-To Number",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"Reason_Rej",text:"Reason For Rejection",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"po_date",text:"Customer PO Date",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"cust_po_num",text:"Customer PO Number",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"delivery_no",text:"Delivery Number",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"shipment_no",text:"Shipment Number",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"order_type",text:"Sales Document Type",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1},{dataField:"approver",text:"Request Status Last Modified by",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}}),editable:!1}];return Object(s.jsxs)("div",{className:"Dashbored_div",children:[Object(s.jsxs)("div",{className:"div_approve_reject_wrapper ",children:[Object(s.jsxs)("div",{className:3===this.state.userRole||4===this.state.userRole?"":"hide_data",children:[Object(s.jsxs)("div",{className:"div_approve_reject",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-action",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Modify Selected :"]})}),Object(s.jsx)(y.a,{options:[{label:"Pending Approval",value:1},{label:"Approve",value:2},{label:"Reject",value:3},{label:"OA to be sent",value:5},{label:"PO Date to be changed",value:6},{label:"Completed",value:7}],onChange:this.onChangeActionType})]}),Object(s.jsxs)("div",{className:this.state.show_rejection_reason,children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-rejection-reason",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "}),"Rejection Reason\xa0"]})}),Object(s.jsx)("input",{className:"fresh-input css-yk16xz-control",onChange:this.onchangeRejectionReason,type:"text",value:this.state.rejection_reason})]}),Object(s.jsx)("button",{type:"button",className:"submit fresh-button ",onClick:this.onClickSubmit,children:"Submit"})]}),Object(s.jsxs)("div",{className:"advanced-Search",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-advanced-search",children:Object(s.jsxs)("span",{className:"fresh-title",children:["Advanced Search ",Object(s.jsx)("span",{className:"reminder",children:"(separate multiple entries with COMMA or ENTER)"})]})}),Object(s.jsx)(U.a,{onItemAdded:this.addItemMultipleSO,onItemDeleted:this.addItemMultipleSO,label:"Sales Order",name:"item-input",placeholder:"Enter whatever items you want; separate them with COMMA or ENTER.",deleteButton:Object(s.jsx)("span",{children:"[x]"})})]})]}),Object(s.jsx)("div",{className:"container-body",children:Object(s.jsx)(E.a,{bootstrap4:!0,keyField:"Request_id",data:this.state.filesData,columns:l,exportCSV:{fileName:"RequestList.csv",exportAll:!1,onlyExportFiltered:!0,onlyExportSelection:!1},children:function(l){return Object(s.jsxs)("div",{children:[Object(s.jsx)(t,Object(r.a)({},l.csvProps)),Object(s.jsx)(F.a,Object(r.a)({filter:T()(),filterPosition:"top",pagination:D()({sizePerPage:50}),selectRow:a,headerClasses:"cust_header-class",wrapperClasses:"table-responsive",cellEdit:P()({mode:"dbclick",afterSaveCell:function(t,a,s,l){var n={newValue:a,req_no:s.Request_id};console.log(n),g.a.post(O.SERVER_URL+"/api/updateCell/update",n).then((function(e){console.log(e),j.b.success("Updated Additional Notification for "+s.Request_id)})).catch((function(e){console.log(e),j.b.error("Error in updating Additional Notification")})),e.pullData()}})},l.baseProps))]})}})}),Object(s.jsx)(j.a,{}),this.state.loading&&Object(s.jsx)(_.a,{loading:this.state.loaded})]})}}]),a}(l.Component),M=a.p+"static/media/abi_logo.0b2b3c8a.png",I=a(269),B=a(270),H=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={userRole:s.props.userRole},s}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(I.a,{collapseOnSelect:!0,expand:"md",className:"color-nav",children:[Object(s.jsx)(I.a.Toggle,{"aria-controls":"rsponsive-navbar-nav"}),Object(s.jsx)(I.a.Collapse,{id:"responsive-navbar-nav",children:Object(s.jsxs)(B.a,{className:"color-font",children:[Object(s.jsx)(B.a.Link,{href:"/",children:Object(s.jsx)("h4",{className:"linkText",children:"Home"})}),Object(s.jsx)(B.a.Link,{href:"/dashboard",children:Object(s.jsx)("h4",{className:"linkText",children:"Dashboard"})}),(2===this.state.userRole||3===this.state.userRole)&&Object(s.jsx)(B.a.Link,{href:"/userMgmt",children:Object(s.jsx)("h4",{className:"linkText",children:"Administration"})})]})})]})}}]),a}(l.Component),Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsxs)("nav",{className:"navbar navbar-custom",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)("img",{src:M,alt:"Brand Logo",width:"200",padding:"10px"})}),Object(s.jsxs)("div",{className:"userprofile",children:[Object(s.jsxs)("span",{className:"username",children:[this.props.name," "]}),Object(s.jsxs)("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",class:"bi bi-person-circle",fill:"#B11F24",xmlns:"http://www.w3.org/2000/svg",children:[Object(s.jsx)("path",{d:"M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"}),Object(s.jsx)("path",{"fill-rule":"evenodd",d:"M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),Object(s.jsx)("path",{"fill-rule":"evenodd",d:"M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"})]})]})]}),Object(s.jsx)(H,{userRole:this.props.userRole})]})}}]),a}(l.Component),Z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).onChangeAction=function(e){console.log(e.value),1===e.value?s.setState({showUserAdmin:"",showViewUsers:"hide_data",actionSelect:e.value}):s.setState({showUserAdmin:"hide_data",showViewUsers:"",actionSelect:e.value})},s.onChangeRoleType=function(e){console.log(e.value),s.setState({roleSelect:e.value}),g.a.post(O.SERVER_URL+"/api/userlist",{role:e.value}).then((function(e){s.setState({filesData:e.data}),console.log(e.data)}))},s.onchangeUserEmail=function(e){console.log(e.target.value),s.setState({userEmail:e.target.value})},s.onSubmit=function(e){if(""!==s.userEmail&&""!==s.roleSelect){var t={role:s.state.roleSelect,user:s.state.userEmail};console.log(t),g.a.post(O.SERVER_URL+"/api/updateRole",t).then((function(e){console.log(e),j.b.success("Role updated successfully")})).catch((function(e){console.log(e),j.b.error("Error in updating Role")})),setTimeout((function(){return window.location.reload()}),2e3)}},s.state={roleSelect:"",userEmail:"",showUserAdmin:"hide_data",showViewUsers:"hide_data",actionSelect:"",filesData:[]},s}return Object(d.a)(a,[{key:"render",value:function(){var e=[{dataField:"user_email",text:"User Email ",filter:Object(V.textFilter)({className:"filter_style",style:{fontSize:"0.75rem"}})}];return Object(s.jsxs)("div",{className:"admin-panel",children:[Object(s.jsxs)("div",{className:"select-action",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_zone",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "})," Select Action\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"User Administration",value:1},{label:"View Users",value:2}],onChange:this.onChangeAction})]}),Object(s.jsx)("div",{className:this.state.showUserAdmin,children:Object(s.jsxs)("div",{className:"fresh-form",children:[Object(s.jsx)("h4",{children:"User Administration"}),Object(s.jsx)("h6",{className:"reminder",children:"* Mandatory fields"}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_zone",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "})," Select Role\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Requestor",value:1},{label:"Admin",value:2},{label:"Admin & Approver",value:3},{label:"Approver",value:4}],onChange:this.onChangeRoleType})]}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-additional_notification_to",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"*"}),"Enter User Email\xa0"]})}),Object(s.jsx)("input",{className:"fresh-input css-yk16xz-control",onChange:this.onchangeUserEmail,type:"text",value:this.state.userEmail})]}),Object(s.jsx)("div",{className:"fresh-field-wrapper",children:Object(s.jsx)("button",{className:"fresh-button cust_btn-cls",onClick:this.onSubmit,children:"Submit\xa0"})})]})}),Object(s.jsx)("div",{className:this.state.showViewUsers,children:Object(s.jsxs)("div",{className:"fresh-field-wrapper_select_role",children:[Object(s.jsx)("h4",{children:"View Users"}),Object(s.jsx)("h6",{className:"reminder",children:"* Mandatory fields"}),Object(s.jsxs)("div",{className:"fresh-field-wrapper",children:[Object(s.jsx)("label",{className:"fresh-label",for:"fresh-request_zone",children:Object(s.jsxs)("span",{className:"fresh-title",children:[Object(s.jsx)("span",{className:"reminder",children:"* "})," Select Role\xa0"]})}),Object(s.jsx)(y.a,{options:[{label:"Admin",value:2},{label:"Admin & Approver",value:3},{label:"Approver",value:4}],onChange:this.onChangeRoleType}),Object(s.jsx)("div",{className:this.state.roleSelect?"":"hide_data",children:Object(s.jsx)(F.a,{bootstrap4:!0,keyField:"user_email",data:this.state.filesData,columns:e,filter:T()(),pagination:D()(),headerClasses:"cust_header-class"})})]})]})}),Object(s.jsx)(j.a,{autoClose:3e3})]})}}]),a}(l.Component),Q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={userRole:1,email:s.props.email,username:s.props.username,isReady:!1},s}return Object(d.a)(a,[{key:"pullUserRole",value:function(){var e=this;g.a.post(O.SERVER_URL+"/api/getUserRole",{email:this.state.email}).then((function(t){console.log(t),e.setState({userRole:t.data[0].user_role})})).catch((function(e){console.log("User doesnot exist in the Role table. User role : Requestor")}))}},{key:"componentDidMount",value:function(){var e=this;g.a.post(O.SERVER_URL+"/api/getUserRole",{email:this.state.email}).then((function(t){console.log(t),e.setState({userRole:t.data[0].user_role}),e.setState({isReady:!0})})).catch((function(t){console.log("User doesnot exist in the Role table. User role : Requestor"),e.setState({isReady:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isReady?Object(s.jsx)("div",{className:"App",children:Object(s.jsx)("div",{id:"page-wrap",children:Object(s.jsxs)(p.a,{children:[Object(s.jsx)(Y,{name:this.state.username,userRole:this.state.userRole}),Object(s.jsx)(b.a,{exact:!0,path:"/",render:function(t){return Object(s.jsx)(N,Object(r.a)(Object(r.a)({},t),{},{email:e.state.email}))}}),Object(s.jsx)(b.a,{exact:!0,path:"/dashboard",render:function(t){return Object(s.jsx)(L,Object(r.a)(Object(r.a)({},t),{},{email:e.state.email,userRole:e.state.userRole}))}}),Object(s.jsx)(b.a,{exact:!0,path:"/upload",render:function(t){return Object(s.jsx)(x,Object(r.a)(Object(r.a)({},t),{},{email:e.state.email}))}}),Object(s.jsx)(b.a,{exact:!0,path:"/userMgmt",render:function(t){return 2===e.state.userRole||3===e.state.userRole?Object(s.jsx)(Z,Object(r.a)({},t)):Object(s.jsx)(N,Object(r.a)(Object(r.a)({},t),{},{email:e.state.email}))}})]})})}):Object(s.jsx)("p",{children:"Loading..."})}}]),a}(l.Component),X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,271)).then((function(t){var a=t.getCLS,s=t.getFID,l=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),l(e),n(e),i(e)}))},W=a(39),J={auth:{authority:"https://login.microsoftonline.com/cef04b19-7776-4a94-b89b-375c77a8f936",clientId:"87ade1b2-8121-4af8-aeee-d2308e029e73",postLogoutRedirectUri:window.location.origin,redirectUri:window.location.origin,validateAuthority:!0,navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0}},G={loginType:W.LoginType.Redirect,tokenRefreshUri:window.location.origin},K=new W.MsalAuthProvider(J,{scopes:["87ade1b2-8121-4af8-aeee-d2308e029e73/.default"]},G);o.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(W.AzureAD,{provider:K,forceLogin:!0,children:function(e){var t=e.login,a=(e.logout,e.authenticationState),l=e.error,n=e.accountInfo;switch(a){case W.AuthenticationState.Authenticated:var i=n.account.userName,o=n.account.name;return Object(s.jsx)(Q,{email:i,username:o});case W.AuthenticationState.Unauthenticated:return Object(s.jsxs)("div",{children:[l&&Object(s.jsx)("p",{children:Object(s.jsx)("span",{children:"An error occured during authentication, please try again!"})}),Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{children:"Hey stranger, Click here to login!"}),Object(s.jsx)("button",{onClick:t,children:"Login"})]})]});default:return Object(s.jsx)("p",{children:"Refresh the page"})}}})}),document.getElementById("root")),X()},41:function(e,t,a){}},[[267,1,2]]]);
//# sourceMappingURL=main.acf79d71.chunk.js.map